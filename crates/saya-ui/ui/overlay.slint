import { VerticalBox, HorizontalBox, ScrollView, Button } from "std-widgets.slint";

export struct DictResult {
    term: string,
    reading: string,
    definition: string,
}

export component OverlayWindow inherits Window {
    title: "Saya";
    always-on-top: true;

    in-out property <[DictResult]> results: [];
    callback add-to-anki(int);

    preferred-width: 600px;
    preferred-height: 400px;

    background: #1e1e1ee6;

    VerticalBox {
        padding: 16px;

        ScrollView {
            VerticalBox {
                spacing: 8px;

                for result[idx] in results: Rectangle {
                    background: #2d2d2d;
                    border-radius: 8px;

                    VerticalBox {
                        padding: 12px;
                        spacing: 6px;

                        HorizontalBox {
                            Text {
                                text: result.term;
                                font-size: 20px;
                                color: #ffffff;
                                font-weight: 700;
                            }

                            Button {
                                text: "+ Anki";
                                clicked => {
                                    root.add-to-anki(idx);
                                }
                            }
                        }

                        Text {
                            text: result.reading;
                            font-size: 14px;
                            color: #a0a0a0;
                        }

                        Text {
                            text: result.definition;
                            font-size: 14px;
                            color: #e0e0e0;
                            wrap: word-wrap;
                        }
                    }
                }
            }
        }
    }
}
