import { VerticalBox, HorizontalBox, Button, ComboBox } from "std-widgets.slint";

export component OcrWindow inherits Window {
    title: "OCR Capture";
    always-on-top: true;

    callback capture-clicked();
    callback refresh-windows();
    callback window-selected(int);

    in-out property <string> status: "Initializing...";
    in-out property <bool> is-capturing: false;
    in-out property <bool> is-ready: false;
    in-out property <[string]> window-list: [];
    in-out property <int> selected-window-index: -1;

    preferred-width: 300px;
    preferred-height: 250px;

    background: #1e1e1e66;

    VerticalBox {
        padding: 8px;
        spacing: 8px;

        // Minimal control bar at top
        Rectangle {
            height: 32px;
            background: #00000088;
            border-radius: 4px;

            HorizontalBox {
                padding: 6px;
                alignment: center;

                Text {
                    text: status;
                    color: is-capturing ? #ffaa00 : #00ff00;
                    vertical-alignment: center;
                    font-size: 11px;
                    font-weight: 600;
                }
            }
        }

        // Capture region indicator (empty green box)
        Rectangle {
            background: #00ff0022;
            border-color: #00ff00;
            border-width: 3px;
            border-radius: 4px;
        }

        // Simple capture button at bottom
        Button {
            text: !is-ready ? "..." : is-capturing ? "..." : "Capture";
            enabled: is-ready && !is-capturing;
            clicked => {
                root.capture-clicked();
            }
        }
    }
}
