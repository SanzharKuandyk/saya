import { VerticalBox, HorizontalBox, Button, ComboBox } from "std-widgets.slint";

export component OcrWindow inherits Window {
    title: "OCR Capture";
    always-on-top: true;

    callback capture-clicked();
    callback refresh-windows();
    callback window-selected(int);

    in-out property<string> status: "Initializing...";
    in-out property<bool> is-capturing: false;
    in-out property<bool> is-ready: false;
    in-out property<bool> auto-capturing-mode: false;
    in-out property<[string]> window-list: [];
    in-out property<int> selected-window-index: -1;

    function button_text() -> string {
        if (!is-ready) {
            return "Preparing...";
        }

        if (is-capturing) {
            return "...";
        }

        if (auto-capturing-mode) {
            return "Start capturing loop";
        }

        return "Capture";
    }

    preferred-width: 400px;
    preferred-height: 200px;

    background: #1e1e1e66;

    VerticalBox {
        padding: 8px;
        spacing: 8px;

        Rectangle {
            background: #00ff0022;
            border-color: #00ff00;
            border-width: 3px;
            border-radius: 4px;
        }

        Button {
            text: button_text();
            enabled: is-ready && !is-capturing;
            clicked => capture-clicked();
        }
    }
}
